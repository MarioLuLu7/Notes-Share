# vue 我认为的小技巧

这是一个集合，如果有的话会不断更新。

### v-if v-show

在显示层面上，这两个基本是相同的，但是在代码层面上，`v-if`是创建或删除某一个节点，而`v-show`类似于`display:none;`，那我们何时使用`v-if`和`v-show`？

1. 是否频繁切换

   当有些情况下，某一个 dom 需要频繁切换，比如按钮的 hover 状态和普通状态是两个不同的 dom，那么这种情况下最好使用`v-show`，也就是用 css 去切换状态。当某些比较重要并且切换不频繁的，就需要用到`v-if`。因为理论上，`v-if`比`v-show`更安全。

2. v-for

   在使用 `v-for` 的时候，很多人都把 `v-if` 用在循环中，这其实是一种不太推荐的写法，现在也有很多语法检查工具把 `key` 和 `v-if` 共存算作错误。因为在列表渲染的时候，会根据 `key` 值来避免渲染相同的 dom，但是使用了 `v-if` 后，列表必定会从头到尾渲染。所以建议的写法是把数据筛选好之后再提交给 dom。

### data 绑定

在很多情况下，修改某一个 data 值，dom 并不会更新，多数出现在 Object 中。

这是因为数据没有和 dom 完全绑定起来。

```
data() {
  return {
    a: {}
  }
}
mounted() {
  this.a = {
    b: 1
  }
}
```

上面代码中，a 里面的 b 属性是不会参与绑定的，需要在初始化的时候就要把 b 属性写进去：

```
data() {
  return {
    a: {
      b: ''
    }
  }
}
mounted() {
  this.a = {
    b: 1
  }
}
```

这样的写法虽然很清晰，但有时候你不知道会把 a 赋上什么值，又或者 a 的初始化值特别复杂特别多，这时候怎么办？

有一个偷懒的方法，依赖 js 超高的自由性，可以先给 a 初始化一个不同数据类型的值，然后再给 a 赋值，就可以实现绑定赋值全部的值。代码：

```
data() {
  return {
    a: ''
  }
}
mounted() {
  this.a = {
    b: 1,
    c: 12,
    d: {
      x: 1,
      y: 2
    }
  }
}
```
